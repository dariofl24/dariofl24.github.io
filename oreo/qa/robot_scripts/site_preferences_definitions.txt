*** Settings ***
Resource        demandware_configuration_definitions.txt
Library         Selenium2Library
Library         Collections

*** Keywords ***
Verify Credentials
  [Arguments]  ${serviceName}  ${credentials_test}  ${credentials_prod}
  Select a Service Page
  Select Type of Instance  ${credentials_test}  ${credentials_prod}  ${env_id}

Select a Service Page
  Click at Site Preferences
  Click at Custom Preferences
  Open Service Configuration  ${serviceName}

Get Credentials
  [Arguments]  ${credentials}
  @{credentials1}  Convert To List  ${credentials}
  ${index} =  Evaluate  3
  : FOR  ${credential}  IN  @{credentials1}
  \  ${locator} =  Catenate  //table//table//table//tr[${index}]//input
  \  Run Keyword IF  '${credential}'<> ':FALSE:'  Verify Credential  ${index}  ${credential}  ${locator}
  \  ${index} =  Evaluate  ${index} + 1

Verify Credential
  [Arguments]  ${index}  ${credential}  ${locator}
  ${credentialValue}=  Get Element Attribute  ${locator}@value
  Should Be Equal As Strings  ${credential}  ${credentialValue}

Open Demandware in Staging
  Open Demandware  0

Select Type of Instance
  [Arguments]  ${credentials_test}  ${credentials_prod}  ${instance}
  Run Keyword If  '@{ENV_TYPE}[${instance}]'=='test'  Get Credentials  ${credentials_test}  ELSE  Get Credentials  ${credentials_prod}

Verify Credentials per Instance
  [Arguments]  ${serviceName}  ${credentials_test}  ${credentials_prod}
  Select a Service Page
  ${instance} =  Evaluate  0
  : FOR  ${instance}  IN RANGE  3
  \  Change Instance in Staging Only  @{LIST_ENVIRONMENT}[${instance}]
  \  Select Type of Instance  ${credentials_test}  ${credentials_prod}  ${instance}
