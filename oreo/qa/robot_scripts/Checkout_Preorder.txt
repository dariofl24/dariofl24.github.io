*** Settings ***
Documentation     Verifies Register fields are preset after checkout completion
Test Teardown     Close All Browsers
Force Tags        Regression    Checkout    US
Resource          checkout_definitions.txt
Resource          site_declarations.txt
Resource          order_definitions.txt

*** Variables ***
#${preorder_product_sku}    142239F
${preorder_product_sku}    142239F
${preorder_product_size}    Men 3 / Women 5
${checkout_preorder_message}    item(s) expected to ship on

*** Test Cases ***
Place an Order using Preorder Products
    Open Browser to Converse Site
    Search Specific Product    ${preorder_product_sku}
    Verify That Product is Available for Pre-ordering
    Set a Product Number    1
    Wait Until Page Contains Element    ${S_SIZES}
    Click Element    ${S_SIZES}/option[contains(text(),'${preorder_product_size}')]
    Wait Until Page Contains Element    ${B_ADDTOCART}
    Click Button    ${B_ADDTOCART}
    Open Cart
    Click Checkout Button from Cart
    Verify That Preorder Message Is Displayed in The Cart
    Continue checkout with Credit Card    ${validSite_name}    ${validSite_lastName}    ${DEFAULTADDRESS}    ${DEFAULTCITY}    ${DEFAULTSTATE}    ${DEFAULTZIPCODE}
    ...    ${DEFAULTPHONE}    ${validSite_user}    ${validSite_name} ${validSite_lastName}    American Express    ${DEFAULTCC}    ${DEFAULTEXPMONTH}
    ...    ${DEFAULTEXPYEAR}    1111    Invalid Credit Card information

*** Keywords ***
Verify That Product is Available for Pre-ordering
    ${Out_of_Stock_Message}=    Get Matching Xpath Count    //span[contains(text(),'This item is currently not available')]
    Should Not Be Equal    '${Out_of_Stock_Message}'    '0'

Verify That Preorder Message Is Displayed in The Cart
    ${Preorder_Message}=    Get Matching Xpath Count    //span[contains(text(),'${checkout_preorder_message}')]
    Should Not Be Equal    '${Preorder_Message}'    '0'
