importPackage(dw.system);

importScript("converse_core:constants.ds");
importScript("converse_core:common/libNamespace.ds");

(function() {

    let METRIC_ID : String = "617518136";
    
    let PROMISE_LINE : XML = 
        <PromiseLine ColorNumber="001" FulfillmentType="NIKEIDDEFAULT" ItemID="107883F-001-9" 
                     LineId="1" RequiredQty="1" SizeNumber="9" StyleNumber="107883F" UnitOfMeasure="EACH"> 
            <ReservationParameters ReservationID="617518136_1"/> 
            <ShipToAddress Country="US"/> 
        </PromiseLine>;
    
    let DOMS_RESPONSE_HAS_QTY: XML = <?xml version="1.0" encoding="UTF-8"?>
        <Promise Action="RESERVE" AllocationRuleId="SYSTEM" Channel="PUBLIC"
            EnterpriseCode="CONVERSEUS" OptimizationType="01" OrganizationCode="CONVERSEUS">
            <PromiseLines>
                <PromiseLine ColorNumber="001" FulfillmentType="NIKEIDDEFAULT"
                    ItemID="107883-001-9" LineId="1"
                    RequiredDeliveryDate="2013-10-29T00:00:00" RequiredQty="1"
                    SizeNumber="9" StyleNumber="107883" UnitOfMeasure="EACH">
                    <Reservations AvailableQty="1.00" QtyToBeReserved="1.00" TotalReservedQty="1.00">
                        <Reservation ExpirationDate="2013-10-07T23:36:40.609Z" ReservationID="617518136_1"/>
                    </Reservations>
                </PromiseLine>
            </PromiseLines>
        </Promise>;

    let DOMS_RESPONSE_NO_QTY: XML = <?xml version="1.0" encoding="UTF-8"?>
        <Promise Action="RESERVE" AllocationRuleId="SYSTEM" Channel="PUBLIC"
            EnterpriseCode="CONVERSEUS" OptimizationType="01" OrganizationCode="CONVERSEUS">
            <PromiseLines>
                <PromiseLine ColorNumber="001" FulfillmentType="NIKEIDDEFAULT"
                    ItemID="undefined-001-9" LineId="1" RequiredDeliveryDate=""
                    RequiredQty="1" SizeNumber="9" StyleNumber="107883"
                    UnitOfMeasure="EACH" mfrTime="">
                    <Reservations AvailableQty="0.00" QtyToBeReserved="0.00" TotalReservedQty="0.00">
                        <Reservation ExpirationDate="" ReservationID="617518136_1"/>
                    </Reservations>
                </PromiseLine>
            </PromiseLines>
        </Promise>;
        
    var ns = Namespace.extendFromString(integration, "nike.reservecapacity.tests");
    Namespace.extend(ns, { 
        Constants: {
            METRIC_ID: METRIC_ID,
            PROMISE_LINE: PROMISE_LINE,
            DOMS_RESPONSE_HAS_QTY: DOMS_RESPONSE_HAS_QTY,
            DOMS_RESPONSE_NO_QTY: DOMS_RESPONSE_NO_QTY
        }
    });
    
})();

