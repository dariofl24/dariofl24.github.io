/**
* To find out the device type.
* To define input and output parameters, create entries of the form:
*
* @input CurrentRequest : dw.system.Request
* @output device : String
*
*/
importPackage( dw.system );

importScript("constants.ds");
importScript("int_device:libDevice.ds");
importScript("int_device:libDeviceResolver.ds");

function execute( args : PipelineDictionary ) : Number
{
    let deviceResolver = integration.device.DeviceResolverFactory.getDeviceResolver("Simple");
    let device = deviceResolver.resolveDevice(args.CurrentRequest.httpUserAgent);
    
    args.device = device.deviceType;
    
    return PIPELET_NEXT;
}
