/**
 * @input Unit: Object
 */
importPackage(dw.system);
importPackage(dw.value);

importScript("module_test:Framework/Assert.ds");
importScript("module_test:Framework/Unit.ds");

importScript("converse_core:constants.ds");
importScript("converse_core:cart/TaxUtils.ds");

function execute(args : PipelineDictionary) : Number {

	args.Unit.describe("TaxUtils Test Suite")
				.test("Tax_rate_calculated_from_taxValue_and_price", function () {
            var taxRateValue = 2;
            var productPrice = new Money(40, converse.constants.CurrencyCode);
            var taxRate = TaxUtils.calculateTaxRate(taxRateValue, productPrice);

            Assert.areEqual(0.05, taxRate);

            productPrice = new Money(50, converse.constants.CurrencyCode);
            var taxRate = TaxUtils.calculateTaxRate(taxRateValue, productPrice);

            Assert.areEqual(0.04, taxRate);
        });

	return PIPELET_NEXT;

}
