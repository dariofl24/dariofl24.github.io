/**
 * Update the given billing address and copies the address details 
 * stored in the given address form to the billing address.
 *
 * @input BillingAddress : dw.order.OrderAddress The address to update.
 * @input AddressForm : dw.web.FormGroup The address form.
 */
importPackage( dw.system );
importPackage( dw.order );
importPackage( dw.web );

function execute( pdict : PipelineDictionary ) : Number
{
	var billingAddress : OrderAddress = pdict.BillingAddress;
	var addressFields : FormGroup = pdict.AddressForm.addressFields;
	
	// copy the address details
	billingAddress.setFirstName( addressFields.common.firstName.value );
	billingAddress.setLastName( addressFields.common.lastName.value );
	billingAddress.setAddress1( addressFields.common.address1.value );
	billingAddress.setAddress2( addressFields.common.address2.value );
	billingAddress.setCity( addressFields.common.city.value );
	billingAddress.setPostalCode( addressFields.regional.zip.value );
	billingAddress.setStateCode( addressFields.states.stateCode.value );
	billingAddress.setCountryCode( addressFields.regional.country.value );
	billingAddress.setPhone( addressFields.regional.phone.value );
		
    return PIPELET_NEXT;
}