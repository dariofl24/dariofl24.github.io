/**
* @input Basket : dw.order.Basket
* @output DisplayPaymentFailureMessage : Boolean
*/
importPackage( dw.order );

importScript("cart/CartUtils.ds");

function execute( pdict : PipelineDictionary ) : Number
{
    pdict.DisplayPaymentFailureMessage = CartUtils.hasPaymentFailures(pdict.Basket);
    
    if (pdict.DisplayPaymentFailureMessage) {
    	CartUtils.clearPaymentFailures(pdict.Basket);
    }
    
    return PIPELET_NEXT;
}
