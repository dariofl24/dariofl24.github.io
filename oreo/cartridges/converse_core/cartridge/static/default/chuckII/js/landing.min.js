!function(){for(var lastTime=0,vendors=["ms","moz","webkit","o"],x=0;x<vendors.length&&!window.requestAnimationFrame;++x)window.requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(callback,element){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);return lastTime=currTime+timeToCall,id}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(id){clearTimeout(id)}),Date.now||(Date.now=function(){return(new Date).getTime()})}(),$(document).ready(function(){function createVideoElement(baseName){for(var $vid=$("<video>",{preload:"auto"}),extensions=["mp4","webm"],i=0,l=extensions.length;l>i;i++){var $source=$("<source>",{src:config.videoDirectory+"/"+baseName+"."+extensions[i],type:"video/"+extensions[i]});$vid.append($source)}return $vid}function toggleHeader(){var $header=$("#header"),$titleBar=$("#titleBar");0===currentSlideIndex?($header.removeClass("up").addClass("down"),$titleBar.removeClass("fixed").addClass("intro")):($header.removeClass("down").addClass("up"),$titleBar.removeClass("intro").addClass("fixed"))}function toggleLowerContents(show){var $footer=$("#footer");show?(scrollLocked=!1,$pageWrapper.removeClass("locked"),$lowerContents.show(),$footer.show(),setTimeout(function(){$lowerContents.addClass("visible"),carouselInitialized||($(".details-slider").detailSlider(),$(".presale-slider").detailSlider(),carouselInitialized=!0)},100)):(scrollLocked=!0,$pageWrapper.addClass("locked"),playbackMode===PLAYBACK.NATIVE&&nativeVideoController.toggleVisibility(!0),$lowerContents.removeClass("visible").hide(),$footer.hide())}function fitVisuals(){return UADetect.isMobilePhone()?(checkOrientation(),void positionMobileElements()):(experienceMode=$w.innerWidth()<=config.mobileBreakPoint?MODES.MOBILE:MODES.DESKTOP_TABLET,experienceMode===MODES.MOBILE?positionMobileElements():positionDesktopElements())}function positionDesktopElements(){var windowWidth=$w.innerWidth(),windowRatio=$w.innerHeight()/windowWidth,windowHeight=$w.innerHeight();$chuckWrapper.height(windowHeight),playbackMode===PLAYBACK.CANVAS&&canvasVideoController.fitContainer(videoRatio),windowRatio>videoRatio?(playbackMode===PLAYBACK.CANVAS?canvasVideoController.fitContainer(videoRatio,"contained"):nativeVideoController.fitContainer("contained"),introController.fitContainer("contained"),stillsController.fitContainer("contained")):(playbackMode===PLAYBACK.CANVAS?canvasVideoController.fitContainer(videoRatio,"covered"):nativeVideoController.fitContainer("covered"),introController.fitContainer("covered"),stillsController.fitContainer("covered")),$("#videoWrap").css("height",""),$("#stillsWrap").css("height",""),$("#sectionNav").css("top",""),$("#panelContainer").find(".panel").css({top:"",height:""}),windowWidth<config.tabletBreakPoint?$lowerContents.css("margin-top",-1*$("#panel1").innerHeight()):$lowerContents.css("margin-top","")}function positionMobileElements(){introController.fitContainer("contained"),stillsController.fitContainer("contained");var viewportHeight=window.innerHeight,viewportWidth=window.innerWidth,graphicsHeight=viewportWidth*videoRatio,titleBarHeight=$("#titleBar").innerHeight(),navTopPadding=50,expandedTitleBarHeight=85;$(".wrapper").height(viewportHeight),$("#videoWrap").height(graphicsHeight),$("#stillsWrap").height(graphicsHeight);var panelHeight=viewportHeight-graphicsHeight-titleBarHeight;$(".panel").height(panelHeight).css({top:graphicsHeight+titleBarHeight});var $sNav=$("#sectionNav"),navTop=titleBarHeight+graphicsHeight+navTopPadding;$sNav.css({top:navTop});var detailsUp=-1*(viewportHeight-graphicsHeight-expandedTitleBarHeight);$lowerContents.css("margin-top",detailsUp),playbackMode===PLAYBACK.CANVAS?canvasVideoController.fitContainer(videoRatio):nativeVideoController.fitContainer("contained")}function userScrolled(e){return isTransitioning?!1:scrollLocked?(e.originalEvent.detail<0||e.originalEvent.wheelDelta>0?(scrollDelta--,Math.abs(scrollDelta)>=config.scrollThreshold&&(prevSlide(),scrollDelta=0)):(scrollDelta++,scrollDelta>=config.scrollThreshold&&(nextSlide(),scrollDelta=0)),!1):(panelsController.hidePanel(animationConfig.length-1),void((e.originalEvent.detail<0||e.originalEvent.wheelDelta>0)&&0===$w.scrollTop()&&(scrollDelta--,Math.abs(scrollDelta)>=config.scrollThreshold&&(toggleLowerContents(!1),prevSlide()))))}function nextSlide(){currentSlideIndex!==animationConfig.length-1&&(currentSlideIndex++,1===currentSlideIndex?(isTransitioning=!0,introController.playCurtain()):animateToSlide(DIRECTION.DOWN))}function prevSlide(){0!==currentSlideIndex&&(currentSlideIndex--,animateToSlide(DIRECTION.UP))}function animateToSlide(direction){function finishTransition(){EventManager.publish("transition:complete",currentSlideIndex),isTransitioning=!1,currentSlideIndex>0&&$titleBar.addClass("return"),currentSlideIndex===animationConfig.length-1&&toggleLowerContents(!0),direction==DIRECTION.UP&&0===currentSlideIndex&&(toggleHeader(),playbackMode===PLAYBACK.NATIVE&&nativeVideoController.toggleVisibility(!1))}function startTransition(){playbackMode===PLAYBACK.NATIVE?nativeVideoController.playSection(start,stop).then(finishTransition):canvasVideoController.playSection(start,stop).then(finishTransition)}var start,stop;return EventManager.publish("transition:start",currentSlideIndex),isTransitioning=!0,videoFailure?void curtainToSlide(currentSlideIndex):(direction===DIRECTION.DOWN&&(playbackMode===PLAYBACK.NATIVE?(start=animationConfig[currentSlideIndex-1].startTime,stop=animationConfig[currentSlideIndex].startTime):(start=animationConfig[currentSlideIndex-1].frame,stop=animationConfig[currentSlideIndex].frame),toggleHeader(),startTransition()),void(direction===DIRECTION.UP&&(playbackMode===PLAYBACK.NATIVE?(start=animationConfig[currentSlideIndex+1].reverseTime,stop=animationConfig[currentSlideIndex].reverseTime):(start=animationConfig[currentSlideIndex+1].frame,stop=animationConfig[currentSlideIndex].frame),0===currentSlideIndex?curtainToSlide(currentSlideIndex):startTransition())))}function curtainToSlide(index){var $curtain=$("#curtain");isTransitioning=!0,toggleHeader(),$curtain.fadeIn(config.curtainSpeed),$curtain.promise().done(function(){currentSlideIndex=index,0===currentSlideIndex?(introController.showStill(),$("#header").removeClass("up").addClass("down"),$("#titleBar").removeClass("fixed").addClass("intro"),videoFailure||$("#videoWrap").hide(),$titleBar.removeClass("return")):(introController.hideStill(),videoFailure||$("#videoWrap").show()),currentSlideIndex>0&&$titleBar.addClass("return"),currentSlideIndex===animationConfig.length-1&&toggleLowerContents(!0),EventManager.publish("transition:curtain",currentSlideIndex),setTimeout(function(){$curtain.fadeOut(config.curtainSpeed,function(){isTransitioning=!1})},500)})}function curtainToLower(target){var $curtain=$("#curtain");isTransitioning=!0,$curtain.fadeIn(config.curtainSpeed),$curtain.promise().done(function(){toggleLowerContents(!0),introController.hideStill(),currentSlideIndex=animationConfig.length-1,panelsController.swapPanel(currentSlideIndex),stillsController.swapStill(currentSlideIndex),toggleHeader();var offset=$(target).offset().top-$titleBar.outerHeight()-1;experienceMode===MODES.MOBILE&&(offset-=30),setTimeout(function(){$titleBar.addClass("return"),$(window).scrollTop(offset)},300),setTimeout(function(){$curtain.fadeOut(config.curtainSpeed,function(){isTransitioning=!1})},300)})}function navigateToSlide(index,forceCurtain){return void 0===forceCurtain&&(forceCurtain=!1),index===currentSlideIndex||isTransitioning?void 0:currentSlideIndex===animationConfig.length-1?(scrollLocked=!0,toggleLowerContents(!1),void curtainToSlide(index)):0===index?void curtainToSlide(index):void(1!==Math.abs(currentSlideIndex-index)||forceCurtain?curtainToSlide(index):index>currentSlideIndex?nextSlide():prevSlide())}function checkOrientation(){var errorClass="orientation-error";$w.width()>$w.height()?($("#chuckTwo").addClass(errorClass),$("#header").removeClass("down")):($("#chuckTwo").removeClass(errorClass),$("#header").addClass("down"))}function bindEvents(){EventManager.subscribe("chuck2:nav-click",function(e,index){navigateToSlide(index)}),EventManager.subscribe("intro:curtain:ready-out",function(){animateToSlide(DIRECTION.DOWN)}),$("#btt").on("click",function(e){e.preventDefault(),$titleBar.removeClass("return"),$("html, body").scrollTop(0),navigateToSlide(0,!1)}),$("#jumpToPurchase").find("a").on("click",function(e){e.preventDefault(),scrollLocked?curtainToLower("#chuckTwoShop"):$("html, body").animate({scrollTop:$("#chuck-promo").offset().top},{duration:2e3,easing:"easeInOutCubic"})}),$("#preSaleCallOut").on("click",function(e){e.preventDefault(),curtainToLower("#chuckTwoPreSale")}),$("#jumpToPreSale").find("a").on("click",function(e){e.preventDefault(),scrollLocked?curtainToLower("#chuckTwoPreSale"):$("html, body").animate({scrollTop:$("#chuckTwoPreSale").offset().top},{duration:2e3,easing:"easeInOutCubic"})}),$("#begin").on("click",function(e){e.preventDefault(),navigateToSlide(1)}),$(".continue.next").on("click",function(e){e.preventDefault(),nextSlide()}),$("#panel6").find(".continue").on("click",function(e){e.preventDefault(),panelsController.hidePanel(animationConfig.length-1),$("html, body").animate({scrollTop:$(".page-contents .summary").offset().top},{duration:1200,easing:"easeInOutCubic"})}),$w.on({resize:fitVisuals,"DOMMouseScroll mousewheel":userScrolled}),$(document).keydown(function(e){if(!(!scrollLocked&&$w.scrollTop()>0||isTransitioning)){switch(e.which){case 37:case 38:scrollLocked||toggleLowerContents(!1),prevSlide();break;case 39:case 40:if(!scrollLocked)return;nextSlide();break;default:return}e.preventDefault()}});var startX=null,startY=null,dist=0,elapsedTime=0,startTime=null,ts=function(e){if(!isTransitioning){var touchObj=e.originalEvent.touches[0];dist=0,startX=touchObj.pageX,startY=touchObj.pageY,startTime=Date.now()}},tm=function(e){(scrollLocked||$w.scrollTop()<=0)&&e.preventDefault()},te=function(e){if(!isTransitioning){var touchObj=e.originalEvent.changedTouches[0];dist=touchObj.pageY-startY,elapsedTime=Date.now()-startTime,elapsedTime<=config.touchNavTimeThreshold&&Math.abs(dist)>=config.touchNavDistThreshold&&(dist>0&&!scrollLocked&&$w.scrollTop()<=0?(toggleLowerContents(!1),prevSlide()):scrollLocked&&dist>0?prevSlide():scrollLocked&&nextSlide())}};$chuckWrapper.on("touchstart",ts),$chuckWrapper.on("touchmove",tm),$chuckWrapper.on("touchend",te)}function init(){bindEvents(),isTransitioning=!0,$("#header").addClass("down hidden"),$pageWrapper.addClass("locked"),playbackMode=UADetect.isMobile()?PLAYBACK.CANVAS:PLAYBACK.NATIVE,experienceMode=$w.innerWidth()<=config.mobileBreakPoint?MODES.MOBILE:MODES.DESKTOP_TABLET,playbackMode===PLAYBACK.NATIVE?nativeVideoController.init():canvasVideoController.init(),fitVisuals(),UADetect.isMobilePhone()&&checkOrientation(),introController.playIntro()}jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d)},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b},easeInOutQuad:function(x,t,b,c,d){return(t/=d/2)<1?c/2*t*t+b:-c/2*(--t*(t-2)-1)+b},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b},easeInOutCubic:function(x,t,b,c,d){return(t/=d/2)<1?c/2*t*t*t+b:c/2*((t-=2)*t*t+2)+b}});var config={videoHeight:720,videoWidth:1280,tabletBreakPoint:960,mobileBreakPoint:600,scrollThreshold:3,curtainSpeed:400,touchNavDistThreshold:150,touchNavTimeThreshold:400,videoStillsDirectory:"video",videoDirectory:"video"};"undefined"!=typeof app&&(config.videoStillsDirectory=app.urls.staticPath+"chuckII/video",config.videoDirectory="https://d2aj657yf9o9bi.cloudfront.net/video");var animationConfig=[{name:"Intro",startTime:0,reverseTime:23.83,frame:0},{name:"Lunarlon",startTime:3.2,reverseTime:20.8,frame:37},{name:"Tounge",startTime:4.18,reverseTime:19.51,frame:51},{name:"Suede",startTime:5.56,reverseTime:18.25,frame:67},{name:"Canvas",startTime:7.1,reverseTime:16.68,frame:85},{name:"Finish",startTime:11.92,reverseTime:11.92,frame:141}],isTransitioning=!1,scrollLocked=!0,scrollDelta=0,currentSlideIndex=0,carouselInitialized=!1,experienceMode=!1,playbackMode=null,videoFailure=!1,videoPlayable=!1,DIRECTION={DOWN:"down",UP:"up"},MODES={DESKTOP_TABLET:1,MOBILE:2},PLAYBACK={NATIVE:1,CANVAS:2},UADetect=function($){var getAgent=function(){return navigator.userAgent.toLowerCase()},isIpad=function(){return getAgent().match(/ipad/g)?!0:!1},isIphone=function(){return getAgent().match(/iphone/g)?!0:!1},isIOS=function(){return isIphone()||isIpad()},isAndroid=function(){return getAgent().match(/android/g)?!0:!1},isMobile=function(){return getAgent().match(/mobile/g)||isAndroid()||isIOS()},isMobilePhone=function(){return isMobile()&&!isIpad()};return{isIpad:isIpad,isIphone:isIphone,isIOS:isIOS,isAndroid:isAndroid,isMobile:isMobile,isMobilePhone:isMobilePhone}}(jQuery),EventManager={subscribe:function(event,fn){$(this).bind(event,fn)},unsubscribe:function(event,fn){$(this).unbind(event,fn)},publish:function(event,data){$(this).trigger(event,data)}},stillsController=(function($,eventBus){var $el=$("#sectionNav"),transitionSpeed=250,setActive=function(idx){$el.find("li").removeClass("current").eq(idx).addClass("current")},hide=function(){$el.animate({opacity:0},transitionSpeed)},show=function(){$el.animate({opacity:1},transitionSpeed)},bindEvents=function(){$el.find("li").click(function(e){eventBus.publish("chuck2:nav-click",$(e.currentTarget).index())}),eventBus.subscribe("transition:start",function(e,index){(0===index||5===index)&&hide(),setActive(index)}),eventBus.subscribe("transition:complete",function(e,index){index>0&&5>index&&show()}),eventBus.subscribe("transition:curtain",function(e,index){index>0&&5>index?(show(),setActive(index)):hide()})};bindEvents()}(jQuery,EventManager),function($,eventBus){var $el=$("#stillsWrap"),transitionSpeed=300,fitContainer=function(type){$el.removeClass().addClass(type)},showStill=function(index){var slide=$el.children().eq(index);slide.addClass("visible crossfade")},hideStill=function(index){var slide=$el.children().eq(index);slide.removeClass("crossfade"),setTimeout(function(){slide.removeClass("visible")},transitionSpeed)},swapStill=function(index){$el.children(".visible").removeClass("visible crossfade"),$el.children().eq(index).addClass("visible crossfade")},bindEvents=function(){eventBus.subscribe("intro:show-still",function(){showStill(0)}),eventBus.subscribe("transition:start",function(e,index){$el.children().each(function(i,el){$(el).hasClass("visible")&&hideStill(i)}),setTimeout(function(){$el.children().eq(index).addClass("visible")},transitionSpeed)}),eventBus.subscribe("transition:complete",function(e,index){showStill(index)}),eventBus.subscribe("transition:curtain",function(e,index){$el.addClass("fast-transition"),$el.children().removeClass("visible crossfade"),$el.children().eq(index).addClass("visible crossfade"),$el.removeClass("fast-transition")})};return bindEvents(),{fitContainer:fitContainer,showStill:showStill,hideStill:hideStill,swapStill:swapStill}}(jQuery,EventManager)),panelsController=function($,eventBus){var $el=$("#panelContainer"),transitionSpeed=500,hidePanel=function(index){var panel=$el.children().eq(index);panel.hasClass("current")&&(panel.removeClass("visible"),setTimeout(function(){panel.removeClass("current")},transitionSpeed))},showPanel=function(index){$el.children().eq(index).addClass("current visible")},swapPanel=function(index){$el.find(".current").removeClass("current visible"),$el.children().eq(index).addClass("current visible")},bindEvents=function(){eventBus.subscribe("intro:curtain:start",function(){$el.children().eq(0).removeClass("visible"),setTimeout(function(){$el.children().removeClass("current")},transitionSpeed)}),eventBus.subscribe("transition:start",function(e,index){$el.children().removeClass("visible"),setTimeout(function(){$el.children().removeClass("current").eq(index).addClass("current")},transitionSpeed)}),eventBus.subscribe("transition:complete",function(e,index){showPanel(index)}),eventBus.subscribe("transition:curtain",function(e,index){swapPanel(index)})};return bindEvents(),{showPanel:showPanel,hidePanel:hidePanel,swapPanel:swapPanel}}(jQuery,EventManager),introController=function($,eventBus){var introFrameId,$introWrapper=$("#introWrap"),$siteHeader=$("#header"),$titleBar=$("#titleBar"),$frame1=$introWrapper.find(".frame_1"),$frame2=$introWrapper.find(".frame_2"),$frame3=$introWrapper.find(".frame_3"),$curtainWrap=$introWrapper.find(".transition"),$curtainText=$curtainWrap.find("p"),introStartTime=null,animations={frame1Viz:!1,frame2Viz:!1,frame3Viz:!1,navBarViz:!1,arrowViz:!1,curtainIn:!1,curtainOut:!1,textIn:!1,textOut:!1},timingConfig={frame1In:500,frame2In:850,frame3In:1200,navBarIn:2467,arrowIn:2867,introDuration:2867,curtainIn:366,textIn:400,textOut:1966,curtainOut:2100,curtainDuration:3100},_resetAnimations=function(){for(var property in animations)animations.hasOwnProperty(property)&&(animations[property]=!1);$frame1.removeClass("visible"),$frame2.removeClass("visible"),$curtainWrap.removeClass("out"),$curtainText.removeClass("out")},_finishIntro=function(){cancelAnimationFrame(introFrameId),_resetAnimations(),videoPlayable&&(isTransitioning=!1),eventBus.subscribe("video:ready",function(){animations.arrowViz||(animations.arrowViz=!0,eventBus.publish("transition:complete",currentSlideIndex),isTransitioning=!1)})},_advanceIntro=function(){var currentTime=Date.now(),elapsed=currentTime-introStartTime;elapsed>timingConfig.frame1In&&!animations.frame1Viz&&(animations.frame1Viz=!0,$frame1.addClass("visible")),elapsed>timingConfig.frame2In&&!animations.frame2Viz&&(animations.frame2Viz=!0,$frame2.addClass("visible")),elapsed>timingConfig.frame3In&&!animations.frame3Viz&&(animations.frame3Viz=!0,$frame3.addClass("visible")),elapsed>timingConfig.navBarIn&&!animations.navBarViz&&(animations.navBarViz=!0,$titleBar.addClass("intro"),$siteHeader.removeClass("hidden")),elapsed>timingConfig.arrowIn&&!animations.arrowViz&&videoPlayable&&(animations.arrowViz=!0,eventBus.publish("transition:complete",currentSlideIndex)),introStartTime+timingConfig.introDuration<currentTime?_finishIntro():introFrameId=requestAnimationFrame(_advanceIntro)},playIntro=function(){eventBus.publish("transition:start",currentSlideIndex),introStartTime=Date.now(),_advanceIntro()},_finishCurtain=function(){cancelAnimationFrame(introFrameId),_resetAnimations(),$introWrapper.css("z-index",""),eventBus.publish("intro:curtain:complete")},_advanceCurtain=function(){var currentTime=Date.now(),elapsed=currentTime-introStartTime;elapsed>timingConfig.curtainIn&&!animations.curtainIn&&(eventBus.publish("intro:curtain:start"),animations.curtainIn=!0,$siteHeader.removeClass("down").addClass("up"),$titleBar.removeClass().addClass("fixed"),$curtainWrap.addClass("in")),elapsed>timingConfig.textIn&&!animations.textIn&&(animations.textIn=!0,$curtainText.addClass("in"),hideStill()),elapsed>timingConfig.textOut&&!animations.textOut&&(animations.textOut=!0,$curtainText.removeClass("in").addClass("out")),elapsed>timingConfig.curtainOut&&!animations.curtainOut&&(animations.curtainOut=!0,eventBus.publish("intro:curtain:ready-out"),$curtainWrap.removeClass("in").addClass("out")),introStartTime+timingConfig.curtainDuration<currentTime?_finishCurtain():introFrameId=requestAnimationFrame(_advanceCurtain)},playCurtain=function(){introStartTime=Date.now(),$introWrapper.css("z-index",18),_advanceCurtain()},showStill=function(){$frame3.addClass("visible"),$introWrapper.addClass("stop1")},hideStill=function(){$frame3.removeClass("visible")},fitContainer=function(type){$introWrapper.removeClass("contained covered").addClass(type)};return{playIntro:playIntro,playCurtain:playCurtain,showStill:showStill,hideStill:hideStill,fitContainer:fitContainer}}(jQuery,EventManager),nativeVideoController=function($,eventBus){var videoEl,$videoWrapper=$("#videoWrap"),fitContainer=function(type){$videoWrapper.removeClass().addClass(type)},playSection=function(startTime,stopTime){function checkVideo(){videoEl.currentTime>=stopTime?stopVideo():transFrameID=requestAnimationFrame(checkVideo)}function stopVideo(){cancelAnimationFrame(transFrameID),videoEl.pause(),videoEl.currentTime=stopTime,dfd.resolve(!0)}var transFrameID,dfd=jQuery.Deferred();return toggleVisibility(!0),videoEl.currentTime=startTime,videoEl.play(),checkVideo(),dfd.promise()},toggleVisibility=function(visible){visible?$videoWrapper.show():$videoWrapper.hide()},initExperience=function(){var $vid=createVideoElement("chuckII-features-desktop");toggleVisibility(!1),$videoWrapper.append($vid),videoEl=$vid[0],videoEl.addEventListener("canplaythrough",function(){videoPlayable||(videoPlayable=!0,eventBus.publish("video:ready"))}),videoEl.addEventListener("error",function(e){$videoWrapper.remove(),videoFailure=!0})};return{playSection:playSection,fitContainer:fitContainer,toggleVisibility:toggleVisibility,init:initExperience}}(jQuery,EventManager),canvasVideoController=function($,eventBus){function _preload(){for(var totalFrames=143,directory=experienceMode!==MODES.MOBILE?"chuckII-features-frames-tablet":"chuckII-features-frames-mobile",i=0;totalFrames>i;i++){var img=new Image;img.src=config.videoStillsDirectory+"/"+directory+"/chuckII-features_"+_padToThree(i)+".jpg",frames.push(img)}videoPlayable=!0}function _padToThree(number){return 999>=number&&(number=("000"+number).slice(-3)),number}var $screen,context,$el=$("#videoWrap"),frames=[],fps=12,canvasHeight=0,canvasWidth=0,initExperience=function(){$screen=$("<canvas>",{id:"featureVideoCanvas"}),$el.append($screen),context=$screen[0].getContext("2d"),_preload()},fitContainer=function(ratio,type){var containerHeight=$el.innerHeight(),containerWidth=$el.innerWidth();type=type||"contained",$el.removeClass(),experienceMode!==MODES.MOBILE?$el.addClass(type):$el.removeClass("contained,covered"),"contained"===type?(canvasHeight=containerHeight,canvasWidth=Math.ceil(containerHeight/ratio),$screen.css("margin-left",(containerWidth-canvasWidth)/2)):(canvasHeight=Math.ceil(containerWidth*ratio),canvasWidth=containerWidth,$screen.css("margin-left",0)),context.canvas.width=canvasWidth,context.canvas.height=canvasHeight},playSection=function(start,stop){var dfd=jQuery.Deferred(),delay=1e3/fps,framesPassed=start,direction=stop>start?DIRECTION.DOWN:DIRECTION.UP;$el.show();var loop=setInterval(function(){var finish=function(){clearInterval(loop),dfd.resolve(!0)};try{context.drawImage(frames[framesPassed],0,0,canvasWidth,canvasHeight),framesPassed=direction===DIRECTION.DOWN?framesPassed+1:framesPassed-1}catch(e){finish()}framesPassed===stop&&finish()},delay);return dfd.promise()};return{init:initExperience,playSection:playSection,fitContainer:fitContainer}}(jQuery,EventManager),$w=$(window),$pageWrapper=$("#wrapper"),$chuckWrapper=$("#chuckTwo").find(".wrapper"),$titleBar=$("#titleBar"),$lowerContents=$(".page-contents"),videoRatio=config.videoHeight/config.videoWidth;init()});
//# sourceMappingURL=landing.min.js.map