!function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.sliding=!1,this.$imageItems=null,this.$copyItems=null,this.$counter=null,this.$indicators=null,this.numberOfSlides=0,this.currentSlide=0,this.init()}var pluginName="pdpSliderBlock",defaults={slideDuration:300,initialSlide:0,breakpoint:720},DIRECTION={LEFT:"left",RIGHT:"right"},CLASS_NAMES={ACTIVE:"active",NEXT:"next",PREVIOUS:"prev"};$.extend(Plugin.prototype,{init:function(){var imageSlideCount=0,copySlideCount=0,$imageSlideContainer=$(this.element).find(".image-slides");$imageSlideContainer.length&&(this.$imageItems=$imageSlideContainer.find(".slide"),$(this.$imageItems[this.settings.initialSlide]).addClass(CLASS_NAMES.ACTIVE),imageSlideCount=this.$imageItems.length);var $copySlideContainer=$(this.element).find(".copy-slides");$copySlideContainer.length&&(this.$copyItems=$copySlideContainer.find(".slide"),$(this.$copyItems[this.settings.initialSlide]).addClass(CLASS_NAMES.ACTIVE),copySlideCount=this.$copyItems.length);var $indicatorContainer=$(this.element).find(".indicators");$indicatorContainer.length&&(this.$indicators=$indicatorContainer),this.$counter=$(this.element).find(".counter"),this.$counter.length||(this.$counter=null),this._updateCounter(this.currentSlide),this.numberOfSlides=Math.max(imageSlideCount,copySlideCount),this._addIndicators(),this._bindEvents(),this._bindControls()},_bindControls:function(){function onTouchStart(e){var touchobj=e.originalEvent.touches[0];dist=0,startX=touchobj.pageX,startY=touchobj.pageY,startTime=(new Date).getTime()}function onTouchEnd(e){var touchobj=e.originalEvent.changedTouches[0];dist=touchobj.pageX-startX,elapsedTime=(new Date).getTime()-startTime,allowedTime>=elapsedTime&&Math.abs(dist)>=threshold&&Math.abs(touchobj.pageY-startY)<=400&&(dist>0?$(me.element).trigger("slide:prev"):$(me.element).trigger("slide:next"))}var me=this;$(this.element).find(".btn-prev").click(function(e){e.preventDefault(),$(me.element).trigger("slide:prev")}),$(this.element).find(".btn-next").click(function(e){e.preventDefault(),$(me.element).trigger("slide:next")}),null!==this.$indicators&&this.$indicators.click(function(e){e.preventDefault();var idx=$(this).parent().children().index(this);$(me.element).trigger("slide:to",[idx])});var startX=null,startY=null,dist=0,threshold=150,allowedTime=400,elapsedTime=0,startTime=null;null!==this.$imageItems&&(this.$imageItems.on("touchstart",$.proxy(onTouchStart,me)),this.$imageItems.on("touchend",$.proxy(onTouchEnd,me))),null!==this.$copyItems&&(this.$copyItems.on("touchstart",$.proxy(onTouchStart,me)),this.$copyItems.on("touchend",$.proxy(onTouchEnd,me)));var touchables=$(this.element).find(".touchable");touchables.on("touchstart",$.proxy(onTouchStart,me)),touchables.on("touchend",$.proxy(onTouchEnd,me))},_bindEvents:function(){$(window).on("resize load",$.proxy(this._reCalcHeights,this)),$(this.element).on({"slide:prev":$.proxy(this._slideToPrevious,this),"slide:next":$.proxy(this._slideToNext,this),"slide:to":$.proxy(this._slideTo,this)})},_addIndicators:function(){if(null!==this.$indicators){for(var me=this,i=0,l=this.numberOfSlides;l>i;i++){var indicator=$("<li/>",{"class":"dot"});i===me.currentSlide&&indicator.addClass(CLASS_NAMES.ACTIVE),me.$indicators.append(indicator)}this.$indicators=this.$indicators.find(".dot")}},_updateCounter:function(idx){if(null!==this.$counter){var counterText=idx+1;10>counterText&&(counterText="0"+counterText),this.$counter.text(counterText)}},_slideToPrevious:function(e){$(this.element).trigger("slide:to",[this._getState()-1,DIRECTION.RIGHT])},_slideToNext:function(e){$(this.element).trigger("slide:to",[this._getState()+1,DIRECTION.LEFT])},_slideTo:function(e,slideIdx,direction){if(direction||(direction=this._getState()>slideIdx?DIRECTION.RIGHT:DIRECTION.LEFT),!this.sliding){this.sliding=!0;var me=this,thisIndex=this._getState(),nextIndex=this._getNextIdx(slideIdx),type=direction===DIRECTION.LEFT?CLASS_NAMES.NEXT:CLASS_NAMES.PREVIOUS;if(null!==this.$imageItems){var $currentImgSlide=$(this.$imageItems[thisIndex]),$nextImgSlide=$(this.$imageItems[nextIndex]);$nextImgSlide.addClass(type),$nextImgSlide[0].offsetWidth,$currentImgSlide.addClass(direction),$nextImgSlide.addClass(direction)}if(null!==this.$copyItems){var $currentCopySlide=$(this.$copyItems[thisIndex]),$nextCopySlide=$(this.$copyItems[nextIndex]);$currentCopySlide.removeClass(CLASS_NAMES.ACTIVE),$nextCopySlide.addClass(CLASS_NAMES.ACTIVE)}me._updateCounter(nextIndex),null!==me.$indicators&&($(this.$indicators[thisIndex]).removeClass(CLASS_NAMES.ACTIVE),$(this.$indicators[nextIndex]).addClass(CLASS_NAMES.ACTIVE)),setTimeout(function(){null!==me.$imageItems&&($nextImgSlide.removeClass([type,direction].join(" ")).addClass(CLASS_NAMES.ACTIVE),$currentImgSlide.removeClass([CLASS_NAMES.ACTIVE,direction].join(" "))),me.sliding=!1},this.settings.slideDuration),this._setState(nextIndex),$(this.element).trigger("slide:changed",nextIndex)}},_getState:function(){return $(this.element).data("state")||0},_setState:function(newIndex){return $(this.element).data("state",newIndex)},_getNextIdx:function(nextIndex){return nextIndex>this.numberOfSlides-1?0:0>nextIndex?this.numberOfSlides-1:nextIndex},_reCalcHeights:function(){var maxHeight=0;if(null!==this.$copyItems){var heights=this.$copyItems.map(function(i,el){return $(el).outerHeight()});maxHeight=Math.max.apply(null,heights),$(this.element).find(".copy-slides").css("min-height",maxHeight)}}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))})}}(jQuery,window,document);
//# sourceMappingURL=pdpSliderBlockPlugin.min.js.map