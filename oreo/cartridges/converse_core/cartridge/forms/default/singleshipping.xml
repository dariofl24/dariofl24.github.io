<?xml version="1.0"?>
<form xmlns="http://www.demandware.com/xml/form/2008-04-19" secure="true">

    <!-- flag indicating whether this checkout step is fulfilled -->
    <field formid="fulfilled" type="boolean" default-value="false"/>
    
    <include formid="pickuppoint" name="pickuppointselector"/>
    
    <!-- list of available addresses to select from -->
    <list formid="addressList">

        <!-- action for actually selecting the address -->
        <action formid="useThisAddress" valid-form="false"/>

    </list>

    <!-- form for creating and editing shipping address -->
    <group formid="shippingAddress" form-error="forms.address.invalid" >

        <!-- use fields from shipping address definition -->
        <include formid="addressFields" name="addressfields"/>

        <!-- optional flags -->
        <field formid="addToAddressBook" label="forms.checkout.addtoaddressbook" type="boolean" mandatory="false" />
        <field formid="addToAddressBookNickName" label="forms.checkout.addtoaddressbook-nickname" type="string" mandatory="false" missing-error="forms.address.city.missing" />

        <!-- gift options -->
        <include formid="giftmessageFields" name="giftmessage"/>

        <!-- shipping method selection -->
        <field formid="shippingMethodID" type="string" mandatory="true" />

        <!-- action for actually saving the address -->
        <action formid="save" valid-form="true"/>
        <action formid="selectAddress" valid-form="false"/>
        

    </group>

    <!-- general actions -->
    <action formid="shipToMultiple" valid-form="false"/>

</form>