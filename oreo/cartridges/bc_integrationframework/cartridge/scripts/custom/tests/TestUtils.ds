importPackage(dw.value);

importScript("converse_core:constants.ds");
importScript("converse_core:common/libNamespace.ds");

(function() {
    
    function createShipmentMock(shipmentOptions) {
        function scrambleValue(value) {
            return value + shipmentOptions.shipmentType;
        };
        
        function scrambleNumericValue(value) {
            return value * shipmentOptions.priceFactor;
        };
        
        function createLineItemMock(sku) {
            return {
                quantityValue: scrambleNumericValue(1),
                basePrice: {
                    value: scrambleValue(70.0)
                },
                adjustedPrice: new Money(scrambleNumericValue(65.0), converse.constants.CurrencyCode),
                custom: {
                    metricID: scrambleValue("MetricID")
                },
                product: {
                    manufacturerSKU: scrambleValue(sku),
                    name: scrambleValue("Name"),
                    UPC: scrambleValue("UPC"),
                    custom: {
                        color: scrambleValue("Color"),
                        size: scrambleValue("Size"),
                        name: scrambleValue("Name"),
                        cut: {
                            displayValue: scrambleValue("Cut")
                        },
                        pillar: {
                            displayValue: scrambleValue("Pillar"),
                        },
                        merchPlannerCategory: scrambleValue("Category"),
                        gender: {
                            displayValue: scrambleValue("Gender")
                        }
                    }
                }
            };
        };
        
        return {
            adjustedShippingTotalPrice: {
                value: scrambleNumericValue(shipmentOptions.priceFactor)
            },
            getProductLineItems: function() {
                return [ createLineItemMock("M9160"), createLineItemMock("M9162") ];
            },
            
            custom: {
                productType: shipmentOptions.shipmentType,
                journeysOrderID: scrambleValue(shipmentOptions.journeysOrderID)
            },
            
            shippingAddress: {
                city: scrambleValue("New York"),
                stateCode: scrambleValue("NY"),
                postalCode: scrambleValue("10001")
            }
        };
    }

    let ns = Namespace.extendFromString(converse, "tests.utils");
    Namespace.extend(ns, { createShipmentMock : createShipmentMock });
})();