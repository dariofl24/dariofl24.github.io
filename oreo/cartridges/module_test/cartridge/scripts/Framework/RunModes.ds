importPackage(dw.system);

importScript("module_test:Framework/Objects.ds");

function ExecuteSuitesRunMode() {
    this.siteId = Site.getCurrent().getID();
}

ExecuteSuitesRunMode.prototype.onSuite = function(unit, suite) {
    this.suiteResult = new SuiteResult(suite.getName());
    unit.result.add(this.suiteResult);
};

ExecuteSuitesRunMode.prototype.onTest = function(unit, suite, test, sites) {
    if (sites.indexOf(this.siteId) == -1) {
        test.disable();
    }
    var testResult = suite.runTest(test);
    this.suiteResult.add(testResult);
};
